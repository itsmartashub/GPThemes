@use "sass:map";

// Shared msg type config
$msg-types: (
    "info": (
        "color": var(--c-accent),
        "bg-opacity": 0.1,
        "border-opacity": 0.2,
    ),
    "success": (
        "color": var(--c-success),
        "bg-opacity": 0.1,
        "border-opacity": 0.2,
    ),
    "warning": (
        "color": var(--c-warning),
        "bg-opacity": 0.15,
        "border-opacity": 0.25,
    ),
    "danger": (
        "color": var(--c-danger),
        "bg-opacity": 0.12,
        "border-opacity": 0.3,
    ),
    "error": (
        "color": var(--c-danger),
        "bg-opacity": 0.12,
        "border-opacity": 0.3,
    ),
);

// Shared base styles for ALL msg components
%msg-base {
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
    border-radius: var(--br-btn);
    contain: layout style paint;

    // Shared CSS variables
    --msg-seed: var(--c-accent);
}

%msg-icon {
    flex-shrink: 0;
    transition: opacity 0.2s ease;

    svg {
        width: 1.25em;
        height: 1.25em;
        color: var(--msg-seed);
        opacity: 0.9;
    }
}

%msg-text {
    flex: 1;
    line-height: 1.4;
    margin: 0;
}

// Universal mixin for type variants
@mixin msg-type-variant($type, $config) {
    $color: map.get($config, "color");
    $bg-opacity: map.get($config, "bg-opacity");
    $border-opacity: map.get($config, "border-opacity");

    &[data-type="#{$type}"],
    &--#{$type} {
        --msg-seed: #{$color};

        background-color: color-alpha(var(--msg-seed), $bg-opacity, true);
        color: var(--msg-seed);
        border: 1px solid color-alpha(var(--msg-seed), $border-opacity, true);
    }
}

// Generate all type variants
@mixin generate-msg-types($types-map) {
    @each $type, $config in $types-map {
        @include msg-type-variant($type, $config);
    }
}

// Shared animation states
@mixin msg-animations {
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease,
        background-color 0.2s ease;

    &:hover {
        background-color: color-alpha(var(--msg-seed), 0.18, true);
    }
}
